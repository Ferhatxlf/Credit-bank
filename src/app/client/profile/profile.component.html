<div class="container light-style flex-grow-1 container-p-y">
  <div class="card">
    <div class="row h-100 px-0 row-bordered row-border-light">
      <div class="col-md-3 pt-0 px-0" style="border-right: 1px solid #6666663b">
        <div class="card-body media align-items-center">
          <img
            src="../../../assets/avatar.png"
            class="d-block m-auto ui-w-80"
            alt="Avatar"
          />

          <div class="informations-container">
            <h5>{{ Folders.nom }} {{ Folders.prenom }}</h5>
            <p>{{ Folders.email }}</p>
            <p>Particulier</p>
          </div>
          <hr />
          <div class="list-button-container">
            <div class="row w-100 pr-0">
              <div class="col-sm-6 col-md-12">
                <a
                  class="list-group-item list-group-item-action"
                  (click)="information = true"
                  [ngClass]="{ active: information }"
                  >Informations personnelles</a
                >
              </div>
              <div class="col-sm-6 col-md-12">
                <a
                  class="list-group-item list-group-item-action"
                  (click)="information = false"
                  [ngClass]="{ active: !information }"
                  >Changer Mot de passe</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-9">
        <div
          class="tab-content"
          style="overflow-y: auto; height: 100%; margin-right: 2%"
        >
        <!-- Inside the "Informations personnelles" tab -->
<div id="account-info" *ngIf="information">
  <hr class="border-light m-0" />
  <div class="card-body pb-2">
 

    <h4 class="font-weight-bold py-3 mb-1">
      Informations personnelles
   
        <mat-icon class="btn " [ngClass]="{ 'clicked': editMode }" (click)="toggleEditMode()">   <span class="material-icons sidebar-icons cursor-pointer" >edit</span></mat-icon>
  
    </h4>
    <div class="row">
      <div class="col-sm-12 col-md-6">
        <div class="form-group mt-2">
          <label class="form-label">Nom :</label>
          <input type="text" class="form-control" [(ngModel)]="Folders.nom" [disabled]="!editMode" />
        </div>
      </div>
      <div class="col-sm-12 col-md-6">
        <div class="form-group mt-2">
          <label class="form-label">Prénom :</label>
          <input type="text" class="form-control" [(ngModel)]="Folders.prenom" [disabled]="!editMode" />
        </div>
      </div>
    </div>

    <div class="form-group mt-2">
      <label class="form-label">Adresse email :</label>
      <input type="text" class="form-control" [(ngModel)]="Folders.email" [disabled]="!editMode" />
    </div>

    <div class="form-group mt-2">
      <label class="form-label">Numéro de téléphone :</label>
      <input type="text" class="form-control" [(ngModel)]="Folders.telephone" [disabled]="!editMode" />
    </div>

    <div class="row">
      <div class="col-sm-12 col-md-4">
        <div class="form-group mt-2">
          <label class="form-label">Addresse :</label>
          <input type="text" class="form-control" [(ngModel)]="Folders.adresse" [disabled]="!editMode" />
        </div>
      </div>
      <div class="col-sm-12 col-md-4">
        <div class="form-group mt-2">
          <label class="form-label">Wilaya :</label>
          <input type="text" class="form-control" [(ngModel)]="Folders.commune.wilaya.wilayaName" [disabled]="!editMode" />
        </div>
      </div>
      <div class="col-sm-12 col-md-4">
        <div class="form-group mt-2">
          <label class="form-label">Commune :</label>
          <input type="text" class="form-control" [(ngModel)]="Folders.commune.nom" [disabled]="!editMode" />
        </div>
      </div>
    </div>


    <div class="button-container mt-3">
      <button class="btn btn2" *ngIf="editMode" (click)="updateUserInfo()">Confirmer</button>
    </div>
  </div>
</div>

          <div *ngIf="!information">
            <div class="card-body pb-2">
              <h4 class="font-weight-bold py-3 mb-1">Changer Mot de passe</h4>

              <form [formGroup]="dataForm" (ngSubmit)="setPassword()">
                <div class="form-group mt-3">
                  <label
                    class="form-label"
                    [ngClass]="{
                      'err-msg':
                        (dataForm.get('oldPassword')?.touched &&
                          !dataForm.get('oldPassword')?.dirty) ||
                        (dataForm.get('oldPassword')?.invalid &&
                          dataForm.get('oldPassword')?.dirty) ||
                        (submittedPassword &&
                          dataForm.get('oldPassword')?.invalid)
                    }"
                    >Mot de passe actuel</label
                  >
                  <input
                    type="password"
                    class="form-control"
                    placeholder="Mot de passe actuel"
                    formControlName="oldPassword"
                    [ngClass]="{
                      errForm:
                        (dataForm.get('oldPassword')?.touched &&
                          !dataForm.get('oldPassword')?.dirty) ||
                        (dataForm.get('oldPassword')?.invalid &&
                          dataForm.get('oldPassword')?.dirty) ||
                        (submittedPassword &&
                          dataForm.get('oldPassword')?.invalid)
                    }"
                  />
                  <p
                    class="err-msg"
                    *ngIf="
                      (dataForm.get('oldPassword')?.touched &&
                        !dataForm.get('oldPassword')?.dirty) ||
                      (dataForm.get('oldPassword')?.invalid &&
                        dataForm.get('oldPassword')?.dirty) ||
                      (submittedPassword &&
                        dataForm.get('oldPassword')?.invalid)
                    "
                  >
                    Champ requis
                  </p>
                </div>
                <div class="form-group mt-3">
                  <label
                    class="form-label"
                    [ngClass]="{
                      'err-msg':
                        (dataForm.get('newPassword')?.touched &&
                          !dataForm.get('newPassword')?.dirty) ||
                        (dataForm.get('newPassword')?.invalid &&
                          dataForm.get('newPassword')?.dirty) ||
                        (submittedPassword &&
                          dataForm.get('newPassword')?.invalid)
                    }"
                    >Nouveau mot de passe</label
                  >
                  <input
                    type="password"
                    class="form-control"
                    placeholder="Nouveau mot de passe"
                    formControlName="newPassword"
                    [ngClass]="{
                      errForm:
                        (dataForm.get('newPassword')?.touched &&
                          !dataForm.get('newPassword')?.dirty) ||
                        (dataForm.get('newPassword')?.invalid &&
                          dataForm.get('newPassword')?.dirty) ||
                        (submittedPassword &&
                          dataForm.get('newPassword')?.invalid)
                    }"
                  />
                  <p
                    class="err-msg"
                    *ngIf="
                      (dataForm.get('newPassword')?.touched &&
                        !dataForm.get('newPassword')?.dirty) ||
                      (dataForm.get('newPassword')?.invalid &&
                        dataForm.get('newPassword')?.dirty) ||
                      (submittedPassword &&
                        dataForm.get('newPassword')?.invalid)
                    "
                  >
                    Le mot de passe doit contenir au moins 8 caractères, une
                    majuscule, un chiffre et un caractère spécial.
                  </p>
                </div>
                <div class="form-group mt-3">
                  <label
                    class="form-label"
                    [ngClass]="{
                      'err-msg':
                        (dataForm.get('passwordConfirmation')?.touched &&
                          !dataForm.get('passwordConfirmation')?.dirty) ||
                        (dataForm.get('passwordConfirmation')?.invalid &&
                          dataForm.get('passwordConfirmation')?.dirty) ||
                        (submittedPassword &&
                          dataForm.get('passwordConfirmation')?.invalid)
                    }"
                    >Confirmez votre mot de passe</label
                  >
                  <input
                    type="password"
                    class="form-control"
                    placeholder="Confirmez votre mot de passe"
                    formControlName="passwordConfirmation"
                    [ngClass]="{
                      errForm:
                        (dataForm.get('passwordConfirmation')?.touched &&
                          !dataForm.get('passwordConfirmation')?.dirty) ||
                        (dataForm.get('passwordConfirmation')?.invalid &&
                          dataForm.get('passwordConfirmation')?.dirty) ||
                        (submittedPassword &&
                          dataForm.get('passwordConfirmation')?.invalid)
                    }"
                  />
                  <p
                    class="err-msg"
                    *ngIf="
                      (dataForm.get('passwordConfirmation')?.touched &&
                        !dataForm.get('passwordConfirmation')?.dirty) ||
                      (dataForm.get('passwordConfirmation')?.invalid &&
                        dataForm.get('passwordConfirmation')?.dirty) ||
                      (submittedPassword &&
                        dataForm.get('passwordConfirmation')?.invalid)
                    "
                  >
                    Les mots de passe ne sont pas identiques.
                  </p>
                </div>
                <div class="button-container mt-3">
                  <button class="btn btn2" type="submit">Confirmer</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
